(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{461:function(s,a,t){"use strict";t.r(a);var e=t(14),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"npm仓库使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm仓库使用"}},[s._v("#")]),s._v(" npm仓库使用")]),s._v(" "),t("h2",{attrs:{id:"私有仓库使用说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#私有仓库使用说明"}},[s._v("#")]),s._v(" 私有仓库使用说明")]),s._v(" "),t("h3",{attrs:{id:"前言：关于-yarn-和-npm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言：关于-yarn-和-npm"}},[s._v("#")]),s._v(" 前言：关于 yarn 和 npm")]),s._v(" "),t("p",[s._v("虽然 npm 自 5.0 后进步很大，但到目前版本 (6.4)，在依赖安装速度、下载文件数量各方面与当前的 yarn (1.9) 还是有所差距。")]),s._v(" "),t("p",[s._v("下边的说明中，会同时给出 yarn 与 npm 的命令，希望大家借此了解 yarn 的用法。")]),s._v(" "),t("h3",{attrs:{id:"_1、-访问地址与权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、-访问地址与权限"}},[s._v("#")]),s._v(" 1、 访问地址与权限")]),s._v(" "),t("p",[s._v("私有仓库采用 Verdaccio 搭建，地址为:")]),s._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("https://npm.mctech.vip\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("由于仓库使用了 SSL 安全协议，当使用 "),t("em",[s._v("npm")]),s._v(" 或 "),t("em",[s._v("yarn")]),s._v(" 进行访问的时候，可能提示:")]),s._v(" "),t("div",{staticClass:"language-error line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("unable to verify the first certificate\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这时，需要使用命令行对 ssl 安全设置进行下调整，")]),s._v(" "),t("p",[s._v("npm :")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" strict-ssl "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("yarn :")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" strict-ssl "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"用户权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用户权限"}},[s._v("#")]),s._v(" 用户权限")]),s._v(" "),t("p",[s._v("私有仓库权限分为 "),t("strong",[s._v("一般用户")]),s._v(" 与 "),t("strong",[s._v("发布用户")]),s._v(" 两种，只有 "),t("strong",[s._v("发布用户")]),s._v(" 能够进行 "),t("em",[s._v("publish")]),s._v(" 操作。")]),s._v(" "),t("p",[s._v("账号与密码另行告知。")]),s._v(" "),t("h3",{attrs:{id:"_2、-设置私有仓库-scope"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、-设置私有仓库-scope"}},[s._v("#")]),s._v(" 2、 设置私有仓库 scope")]),s._v(" "),t("h4",{attrs:{id:"npm-的-scope-特性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-的-scope-特性"}},[s._v("#")]),s._v(" npm 的 scope 特性")]),s._v(" "),t("p",[s._v("npm 中，所有的包都有一个名称。scope 是包名称中，将相关的包进行分类描述的一种方式。")]),s._v(" "),t("p",[s._v("表现为：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("@myscope/mypackage\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 package.json 中，私有包名中，必须包含 scope 前缀:")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@mctech/mypackage"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  ...\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("npm 的一些命令，可以利用 scope 特性进行特定的处理。")]),s._v(" "),t("h4",{attrs:{id:"我们的-scope"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我们的-scope"}},[s._v("#")]),s._v(" 我们的 scope")]),s._v(" "),t("p",[s._v("目前，梦诚私有 npm 仓库中包含 “梦诚包” 和 “陕梦包” scope。")]),s._v(" "),t("p",[s._v("梦诚："),t("strong",[s._v("mctech")])]),s._v(" "),t("p",[s._v("陕梦："),t("strong",[s._v("yearrow")])]),s._v(" "),t("p",[s._v("使用如下命令进行 npm scope 与仓库地址的关联设置")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" @mctech:registry https://npm.mctech.vip\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" @yearrow:registry https://npm.mctech.vip\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("设置完成后，当包名称中包含 "),t("em",[s._v("@mctech")]),s._v(" 和 "),t("em",[s._v("@yearrow")]),s._v(" 前缀时，npm 命令都会连接 https://npm.mctech.vip 进行操作。")]),s._v(" "),t("h3",{attrs:{id:"_3、-登录私有仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、-登录私有仓库"}},[s._v("#")]),s._v(" 3、 登录私有仓库")]),s._v(" "),t("p",[s._v("使用私有仓库时，需要指定对应的用户登录名与密码：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" login --registry"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://npm.mctech.vip --scope"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("@mctech\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" login --registry"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://npm.mctech.vip --scope"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("@yearrow\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("注意")]),s._v("\n注销对应的登录")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("logout")]),s._v(" --registry"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://npm.mctech.vip --scope"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("@yearrow\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("em",[s._v("npm")]),s._v(" 会询问 "),t("em",[s._v("username、password、email")]),s._v(" 等信息。")]),s._v(" "),t("h3",{attrs:{id:"_4、-安装私有包依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、-安装私有包依赖"}},[s._v("#")]),s._v(" 4、 安装私有包依赖")]),s._v(" "),t("p",[t("em",[s._v("package.json")]),s._v(" 中，依赖的私有包名称必须包含 "),t("em",[s._v("@mctech")]),s._v(" 或 "),t("em",[s._v("@yearrow")]),s._v(" 前缀：")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@mctech/iwop-desktop-framework"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^0.1.17"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@yearrow/mypackage"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^1.0.0"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("安装依赖:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("添加依赖:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" @mctech/mypackage\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" @yearrow/mypackage\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("不使用版本号进行正式版本与开发版本，使用不同的 scope 进行区分。**")]),s._v(" "),t("p",[t("strong",[s._v("当切换正式版本与开发版本时，切记修改依赖的包名中的 scope 前缀。")])]),s._v(" "),t("p",[t("strong",[s._v("不再使用 git 作为依赖源。")])]),s._v(" "),t("p",[s._v("代码中引用私有包，也需要加上含 scope 前缀的包名：")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" mypkg "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@mctech/mypackage'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_5、-发布私有包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、-发布私有包"}},[s._v("#")]),s._v(" 5、 发布私有包")]),s._v(" "),t("p",[s._v("发布私有包，与发布公共包一致:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish --access restricted\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" publish\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("其中，"),t("em",[s._v("--access restricted")]),s._v(" 参数在发布私有包时为默认参数")]),s._v(" "),t("h4",{attrs:{id:"私有包-package-json-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#私有包-package-json-配置"}},[s._v("#")]),s._v(" 私有包 package.json 配置")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@mctech/mypackage"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"files"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src/index.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"module"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist/mypackage.es.js"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("当发布私有包时，尽量在 package.json 中设置 "),t("em",[s._v("files")]),s._v(" 属性，用来指定包中包含的文件。")]),s._v(" "),t("p",[s._v("如果发布之前有打包过程，尽量只在 files 中包含打包后的文件。")]),s._v(" "),t("p",[t("em",[s._v("main")]),s._v(" 属性指定包的入口文件，通常是 cjs 模块输出文件，")]),s._v(" "),t("p",[s._v("如果是 es 模块，通过 "),t("em",[s._v("module")]),s._v(" 属性来指定包的入口文件。")]),s._v(" "),t("h3",{attrs:{id:"额外的内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#额外的内容"}},[s._v("#")]),s._v(" 额外的内容")]),s._v(" "),t("h4",{attrs:{id:"使用-nrm-进行-npm-源管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-nrm-进行-npm-源管理"}},[s._v("#")]),s._v(" 使用 nrm 进行 npm 源管理")]),s._v(" "),t("p",[s._v("nrm 是一个非常方便的进行 npm 源管理的工具，当使用多个公共源并需要进行切换时，使用 nrm 非常方便。")]),s._v(" "),t("p",[s._v("安装：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i nrm -g\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" global "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" nrm\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("显示当前配置的源：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("nrm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("添加源：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("nrm add myregistry htts://r.myurl.com\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("选择源：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("nrm use myregistry\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("更多详细说明请访问：")]),s._v(" "),t("p",[s._v("[]: https://github.com/Pana/nrm")]),s._v(" "),t("h4",{attrs:{id:"使用本地包代码调试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用本地包代码调试"}},[s._v("#")]),s._v(" 使用本地包代码调试")]),s._v(" "),t("p",[s._v("在开发公共包的时，有时候需要在其他项目中依赖该开发中的包进行调试，")]),s._v(" "),t("p",[s._v("这时候可以使用 link 模式依赖本地包的代码。")]),s._v(" "),t("p",[s._v("示例：")]),s._v(" "),t("p",[s._v("假设被依赖的包名为：@mctech/foo。")]),s._v(" "),t("p",[s._v("首先，在 @mctech/foo 包的源码目录下执行：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("或：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("然后，在要依赖上述包的项目路径下，执行：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" @mctech/foo\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("或：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" @mctech/foo\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("调试完成后，可以用 unlink 命令移除本地连接：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" unlink @mctech/foo\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("或：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" unlink @mctech/foo\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);