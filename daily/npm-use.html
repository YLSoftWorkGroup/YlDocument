<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>npm仓库使用 | 易龙软件开发文档</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/YlDocument/favicon.ico">
    <meta name="description" content="YLSoft Work Document">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/YlDocument/assets/css/0.styles.3e4288f7.css" as="style"><link rel="preload" href="/YlDocument/assets/js/app.d7e74e05.js" as="script"><link rel="preload" href="/YlDocument/assets/js/2.b97c573e.js" as="script"><link rel="preload" href="/YlDocument/assets/js/9.b3a6ced7.js" as="script"><link rel="prefetch" href="/YlDocument/assets/js/10.5de03124.js"><link rel="prefetch" href="/YlDocument/assets/js/11.53dd5710.js"><link rel="prefetch" href="/YlDocument/assets/js/12.245cea59.js"><link rel="prefetch" href="/YlDocument/assets/js/13.a0a30431.js"><link rel="prefetch" href="/YlDocument/assets/js/14.4b1c368d.js"><link rel="prefetch" href="/YlDocument/assets/js/15.dd38e28f.js"><link rel="prefetch" href="/YlDocument/assets/js/16.8cc3c715.js"><link rel="prefetch" href="/YlDocument/assets/js/17.266a332a.js"><link rel="prefetch" href="/YlDocument/assets/js/18.fac33c9f.js"><link rel="prefetch" href="/YlDocument/assets/js/19.e7b76d73.js"><link rel="prefetch" href="/YlDocument/assets/js/3.6160bf56.js"><link rel="prefetch" href="/YlDocument/assets/js/4.4e3dcb12.js"><link rel="prefetch" href="/YlDocument/assets/js/5.261d6d3e.js"><link rel="prefetch" href="/YlDocument/assets/js/6.f4e8cddd.js"><link rel="prefetch" href="/YlDocument/assets/js/7.2eba18d7.js"><link rel="prefetch" href="/YlDocument/assets/js/8.0d62bc96.js">
    <link rel="stylesheet" href="/YlDocument/assets/css/0.styles.3e4288f7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/YlDocument/" class="home-link router-link-active"><img src="/YlDocument/img/logo.png" alt="易龙软件开发文档" class="logo"> <span class="site-name can-hide">易龙软件开发文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/YlDocument/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发规范" class="dropdown-title"><span class="title">开发规范</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/YlDocument/base/base-rules/" class="nav-link">
  基础规范
</a></li><li class="dropdown-item"><!----> <a href="/YlDocument/front/front-rules/" class="nav-link">
  前端规范
</a></li><li class="dropdown-item"><!----> <a href="/YlDocument/service/service-rules/" class="nav-link">
  服务端规范
</a></li></ul></div></div><div class="nav-item"><a href="/YlDocument/basic/facilities.html" class="nav-link">
  基础设施
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库脚本" class="dropdown-title"><span class="title">数据库脚本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/YlDocument/sql/cbaseinfo/" class="nav-link">
  物资基础数据
</a></li><li class="dropdown-item"><!----> <a href="/YlDocument/sql/mquantity/" class="nav-link">
  物资实物量管控
</a></li><li class="dropdown-item"><!----> <a href="/YlDocument/sql/maccount/" class="nav-link">
  物资账务管理
</a></li><li class="dropdown-item"><!----> <a href="/YlDocument/sql/concrete/" class="nav-link">
  混凝土核算系统
</a></li></ul></div></div><div class="nav-item"><a href="/YlDocument/daily/editor.html" class="nav-link">
  环境配置
</a></div><div class="nav-item"><a href="/YlDocument/extend/markdown.html" class="nav-link">
  技术扩展
</a></div><div class="nav-item"><a href="https://github.com/YLSoftWorkGroup/YlDocument" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/YlDocument/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发规范" class="dropdown-title"><span class="title">开发规范</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/YlDocument/base/base-rules/" class="nav-link">
  基础规范
</a></li><li class="dropdown-item"><!----> <a href="/YlDocument/front/front-rules/" class="nav-link">
  前端规范
</a></li><li class="dropdown-item"><!----> <a href="/YlDocument/service/service-rules/" class="nav-link">
  服务端规范
</a></li></ul></div></div><div class="nav-item"><a href="/YlDocument/basic/facilities.html" class="nav-link">
  基础设施
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库脚本" class="dropdown-title"><span class="title">数据库脚本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/YlDocument/sql/cbaseinfo/" class="nav-link">
  物资基础数据
</a></li><li class="dropdown-item"><!----> <a href="/YlDocument/sql/mquantity/" class="nav-link">
  物资实物量管控
</a></li><li class="dropdown-item"><!----> <a href="/YlDocument/sql/maccount/" class="nav-link">
  物资账务管理
</a></li><li class="dropdown-item"><!----> <a href="/YlDocument/sql/concrete/" class="nav-link">
  混凝土核算系统
</a></li></ul></div></div><div class="nav-item"><a href="/YlDocument/daily/editor.html" class="nav-link">
  环境配置
</a></div><div class="nav-item"><a href="/YlDocument/extend/markdown.html" class="nav-link">
  技术扩展
</a></div><div class="nav-item"><a href="https://github.com/YLSoftWorkGroup/YlDocument" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/YlDocument/daily/editor.html" class="sidebar-link">vscode 开发配置说明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#一、使用-eslint-进行代码检查" class="sidebar-link">一、使用 eslint 进行代码检查</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#代码规范：standard" class="sidebar-link">代码规范：standard</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#安装-eslint-与相关插件依赖" class="sidebar-link">安装 eslint 与相关插件依赖</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#配置" class="sidebar-link">配置</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#在-visual-studio-code-中使用-eslint" class="sidebar-link">在 Visual Studio Code 中使用 eslint</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#按-standard-代码规则进行代码格式化" class="sidebar-link">按 standard 代码规则进行代码格式化</a></li></ul></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#二、vue-开发配置" class="sidebar-link">二、vue 开发配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#安装-vetur-插件" class="sidebar-link">安装 Vetur 插件</a></li></ul></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#三、babel-相关配置" class="sidebar-link">三、babel 相关配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#安装-babel-javascript-插件" class="sidebar-link">安装 Babel Javascript 插件</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#项目中的-babel-config-js" class="sidebar-link">项目中的 babel.config.js</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#browserlistrc-配置文件" class="sidebar-link">.browserlistrc 配置文件</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#安装-vscode-one-dark-sublime-babel-主题" class="sidebar-link">安装 vscode One Dark (sublime babel) 主题</a></li></ul></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#四、其他常用-vs-code-插件" class="sidebar-link">四、其他常用 VS Code 插件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#version-lens" class="sidebar-link">Version Lens</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#http-client" class="sidebar-link">HTTP Client</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#path-autocomplete" class="sidebar-link">Path Autocomplete</a></li></ul></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#五、完整的-vs-code-自定义设置-settings-json" class="sidebar-link">五、完整的 VS Code 自定义设置 (settings.json)</a></li></ul></li><li><a href="/YlDocument/daily/editor.html" class="sidebar-link">vscode 开发配置说明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#一、使用-eslint-进行代码检查" class="sidebar-link">一、使用 eslint 进行代码检查</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#代码规范：standard" class="sidebar-link">代码规范：standard</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#安装-eslint-与相关插件依赖" class="sidebar-link">安装 eslint 与相关插件依赖</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#配置" class="sidebar-link">配置</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#在-visual-studio-code-中使用-eslint" class="sidebar-link">在 Visual Studio Code 中使用 eslint</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#按-standard-代码规则进行代码格式化" class="sidebar-link">按 standard 代码规则进行代码格式化</a></li></ul></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#二、vue-开发配置" class="sidebar-link">二、vue 开发配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#安装-vetur-插件" class="sidebar-link">安装 Vetur 插件</a></li></ul></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#三、babel-相关配置" class="sidebar-link">三、babel 相关配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#安装-babel-javascript-插件" class="sidebar-link">安装 Babel Javascript 插件</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#项目中的-babel-config-js" class="sidebar-link">项目中的 babel.config.js</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#browserlistrc-配置文件" class="sidebar-link">.browserlistrc 配置文件</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#安装-vscode-one-dark-sublime-babel-主题" class="sidebar-link">安装 vscode One Dark (sublime babel) 主题</a></li></ul></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#四、其他常用-vs-code-插件" class="sidebar-link">四、其他常用 VS Code 插件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#version-lens" class="sidebar-link">Version Lens</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#http-client" class="sidebar-link">HTTP Client</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#path-autocomplete" class="sidebar-link">Path Autocomplete</a></li></ul></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/editor.html#五、完整的-vs-code-自定义设置-settings-json" class="sidebar-link">五、完整的 VS Code 自定义设置 (settings.json)</a></li></ul></li><li><a href="/YlDocument/daily/npm-use.html" aria-current="page" class="active sidebar-link">npm仓库使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/YlDocument/daily/npm-use.html#私有仓库使用说明" class="sidebar-link">私有仓库使用说明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/YlDocument/daily/npm-use.html#前言：关于-yarn-和-npm" class="sidebar-link">前言：关于 yarn 和 npm</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/npm-use.html#_1、-访问地址与权限" class="sidebar-link">1、 访问地址与权限</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/npm-use.html#_2、-设置私有仓库-scope" class="sidebar-link">2、 设置私有仓库 scope</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/npm-use.html#_3、-登录私有仓库" class="sidebar-link">3、 登录私有仓库</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/npm-use.html#_4、-安装私有包依赖" class="sidebar-link">4、 安装私有包依赖</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/npm-use.html#_5、-发布私有包" class="sidebar-link">5、 发布私有包</a></li><li class="sidebar-sub-header"><a href="/YlDocument/daily/npm-use.html#额外的内容" class="sidebar-link">额外的内容</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="npm仓库使用"><a href="#npm仓库使用" class="header-anchor">#</a> npm仓库使用</h1> <h2 id="私有仓库使用说明"><a href="#私有仓库使用说明" class="header-anchor">#</a> 私有仓库使用说明</h2> <h3 id="前言：关于-yarn-和-npm"><a href="#前言：关于-yarn-和-npm" class="header-anchor">#</a> 前言：关于 yarn 和 npm</h3> <p>虽然 npm 自 5.0 后进步很大，但到目前版本 (6.4)，在依赖安装速度、下载文件数量各方面与当前的 yarn (1.9) 还是有所差距。</p> <p>下边的说明中，会同时给出 yarn 与 npm 的命令，希望大家借此了解 yarn 的用法。</p> <h3 id="_1、-访问地址与权限"><a href="#_1、-访问地址与权限" class="header-anchor">#</a> 1、 访问地址与权限</h3> <p>私有仓库采用 Verdaccio 搭建，地址为:</p> <div class="language-url line-numbers-mode"><pre class="language-text"><code>https://npm.mctech.vip
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>由于仓库使用了 SSL 安全协议，当使用 <em>npm</em> 或 <em>yarn</em> 进行访问的时候，可能提示:</p> <div class="language-error line-numbers-mode"><pre class="language-text"><code>unable to verify the first certificate
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这时，需要使用命令行对 ssl 安全设置进行下调整，</p> <p>npm :</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> config <span class="token builtin class-name">set</span> strict-ssl <span class="token boolean">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>yarn :</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> config <span class="token builtin class-name">set</span> strict-ssl <span class="token boolean">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="用户权限"><a href="#用户权限" class="header-anchor">#</a> 用户权限</h4> <p>私有仓库权限分为 <strong>一般用户</strong> 与 <strong>发布用户</strong> 两种，只有 <strong>发布用户</strong> 能够进行 <em>publish</em> 操作。</p> <p>账号与密码另行告知。</p> <h3 id="_2、-设置私有仓库-scope"><a href="#_2、-设置私有仓库-scope" class="header-anchor">#</a> 2、 设置私有仓库 scope</h3> <h4 id="npm-的-scope-特性"><a href="#npm-的-scope-特性" class="header-anchor">#</a> npm 的 scope 特性</h4> <p>npm 中，所有的包都有一个名称。scope 是包名称中，将相关的包进行分类描述的一种方式。</p> <p>表现为：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@myscope/mypackage
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在 package.json 中，私有包名中，必须包含 scope 前缀:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@mctech/mypackage&quot;</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>npm 的一些命令，可以利用 scope 特性进行特定的处理。</p> <h4 id="我们的-scope"><a href="#我们的-scope" class="header-anchor">#</a> 我们的 scope</h4> <p>目前，梦诚私有 npm 仓库中包含 “梦诚包” 和 “陕梦包” scope。</p> <p>梦诚：<strong>mctech</strong></p> <p>陕梦：<strong>yearrow</strong></p> <p>使用如下命令进行 npm scope 与仓库地址的关联设置</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> config <span class="token builtin class-name">set</span> @mctech:registry https://npm.mctech.vip
<span class="token function">npm</span> config <span class="token builtin class-name">set</span> @yearrow:registry https://npm.mctech.vip
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>设置完成后，当包名称中包含 <em>@mctech</em> 和 <em>@yearrow</em> 前缀时，npm 命令都会连接 https://npm.mctech.vip 进行操作。</p> <h3 id="_3、-登录私有仓库"><a href="#_3、-登录私有仓库" class="header-anchor">#</a> 3、 登录私有仓库</h3> <p>使用私有仓库时，需要指定对应的用户登录名与密码：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> login --registry<span class="token operator">=</span>https://npm.mctech.vip --scope<span class="token operator">=</span>@mctech
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> login --registry<span class="token operator">=</span>https://npm.mctech.vip --scope<span class="token operator">=</span>@yearrow
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>注意</strong>
注销对应的登录</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token builtin class-name">logout</span> --registry<span class="token operator">=</span>https://npm.mctech.vip --scope<span class="token operator">=</span>@yearrow
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><em>npm</em> 会询问 <em>username、password、email</em> 等信息。</p> <h3 id="_4、-安装私有包依赖"><a href="#_4、-安装私有包依赖" class="header-anchor">#</a> 4、 安装私有包依赖</h3> <p><em>package.json</em> 中，依赖的私有包名称必须包含 <em>@mctech</em> 或 <em>@yearrow</em> 前缀：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;@mctech/iwop-desktop-framework&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.1.17&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;@yearrow/mypackage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.0&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>安装依赖:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>添加依赖:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">add</span> @mctech/mypackage
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> @yearrow/mypackage
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>不使用版本号进行正式版本与开发版本，使用不同的 scope 进行区分。**</p> <p><strong>当切换正式版本与开发版本时，切记修改依赖的包名中的 scope 前缀。</strong></p> <p><strong>不再使用 git 作为依赖源。</strong></p> <p>代码中引用私有包，也需要加上含 scope 前缀的包名：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> mypkg <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@mctech/mypackage'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_5、-发布私有包"><a href="#_5、-发布私有包" class="header-anchor">#</a> 5、 发布私有包</h3> <p>发布私有包，与发布公共包一致:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> publish
<span class="token function">npm</span> publish --access restricted
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> publish
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中，<em>--access restricted</em> 参数在发布私有包时为默认参数</p> <h4 id="私有包-package-json-配置"><a href="#私有包-package-json-配置" class="header-anchor">#</a> 私有包 package.json 配置</h4> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@mctech/mypackage&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;files&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;src&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;dist&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/index.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/mypackage.es.js&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>当发布私有包时，尽量在 package.json 中设置 <em>files</em> 属性，用来指定包中包含的文件。</p> <p>如果发布之前有打包过程，尽量只在 files 中包含打包后的文件。</p> <p><em>main</em> 属性指定包的入口文件，通常是 cjs 模块输出文件，</p> <p>如果是 es 模块，通过 <em>module</em> 属性来指定包的入口文件。</p> <h3 id="额外的内容"><a href="#额外的内容" class="header-anchor">#</a> 额外的内容</h3> <h4 id="使用-nrm-进行-npm-源管理"><a href="#使用-nrm-进行-npm-源管理" class="header-anchor">#</a> 使用 nrm 进行 npm 源管理</h4> <p>nrm 是一个非常方便的进行 npm 源管理的工具，当使用多个公共源并需要进行切换时，使用 nrm 非常方便。</p> <p>安装：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">npm</span> i nrm -g
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">yarn</span> global <span class="token function">add</span> nrm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>显示当前配置的源：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>nrm <span class="token function">ls</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>添加源：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>nrm add myregistry htts://r.myurl.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>选择源：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>nrm use myregistry
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>更多详细说明请访问：</p> <p>[]: https://github.com/Pana/nrm</p> <h4 id="使用本地包代码调试"><a href="#使用本地包代码调试" class="header-anchor">#</a> 使用本地包代码调试</h4> <p>在开发公共包的时，有时候需要在其他项目中依赖该开发中的包进行调试，</p> <p>这时候可以使用 link 模式依赖本地包的代码。</p> <p>示例：</p> <p>假设被依赖的包名为：@mctech/foo。</p> <p>首先，在 @mctech/foo 包的源码目录下执行：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">link</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">link</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后，在要依赖上述包的项目路径下，执行：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">link</span> @mctech/foo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">link</span> @mctech/foo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>调试完成后，可以用 unlink 命令移除本地连接：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> unlink @mctech/foo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> unlink @mctech/foo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/4/2021, 8:22:44 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/YlDocument/daily/editor.html" class="prev">
        vscode 开发配置说明
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/YlDocument/assets/js/app.d7e74e05.js" defer></script><script src="/YlDocument/assets/js/2.b97c573e.js" defer></script><script src="/YlDocument/assets/js/9.b3a6ced7.js" defer></script>
  </body>
</html>
